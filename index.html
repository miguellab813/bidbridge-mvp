<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BidBridge | Renovations Simplified</title>
<link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#0f172a">
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="BidBridge">
    <link rel="apple-touch-icon" href="/icon-192.png">

    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/service-worker.js')
            .then(registration => {
              console.log('ServiceWorker registered successfully');
            })
            .catch(err => {
              console.log('ServiceWorker registration failed: ', err);
            });
        });
      }
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="/socket.io/socket.io.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; overflow-x: hidden; }
        h1, h2, h3 { font-family: 'Playfair Display', serif; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        .app-view { display: none; min-height: 100vh; animation: fadeIn 0.4s ease-out; }
        .app-view.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Demo Nav */
        #demo-nav { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); background: rgba(15, 23, 42, 0.95); backdrop-filter: blur(10px); padding: 8px 16px; border-radius: 99px; z-index: 100; display: flex; gap: 8px; box-shadow: 0 10px 25px rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.1); }
        .demo-btn { color: rgba(255,255,255,0.6); font-size: 11px; font-weight: 600; padding: 6px 12px; border-radius: 20px; cursor: pointer; transition: all 0.2s; white-space: nowrap; }
        .demo-btn:hover { color: white; background: rgba(255,255,255,0.1); }
        .demo-btn.active { color: #0f172a; background: #f59e0b; }
        
        /* Custom UI */
        .sow-paper { background: #ffffff; background-image: radial-gradient(#e5e7eb 1px, transparent 0); background-size: 20px 20px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); }
        .verified-badge { background: #dcfce7; color: #15803d; border: 1px solid #86efac; }
        .template-card.active { border-color: #f59e0b; background-color: #fffbeb; }
        .template-card.active .check-icon { opacity: 1; transform: scale(1); }
        @keyframes marquee { 0% { transform: translateX(0); } 100% { transform: translateX(-100%); } }
        .animate-marquee { animation: marquee 30s linear infinite; }
    </style>
</head>
<body>

    <section id="view-landing" class="app-view active">
        <nav class="w-full bg-white border-b border-slate-200 sticky top-0 z-40">
            <div class="max-w-7xl mx-auto px-6 h-20 flex justify-between items-center">
                <div class="flex items-center gap-2 text-2xl font-bold text-slate-900 cursor-pointer" onclick="location.reload()">
                    <i class="fa-solid fa-bridge-water text-amber-500"></i> BidBridge
                </div>
                <div class="hidden md:flex gap-6 text-sm font-medium text-slate-600">
                    <a href="#">How it Works</a>
                    <a href="#">For Pros</a>
                    <a href="#" class="text-slate-900 font-bold">Log In</a>
                </div>
            </div>
        </nav>
        <div class="pt-24 pb-24 text-center max-w-5xl mx-auto px-4">
            <div class="inline-flex items-center px-4 py-1.5 rounded-full border border-slate-200 bg-white shadow-sm mb-8">
                <span class="h-2 w-2 rounded-full bg-green-500 mr-2 animate-pulse"></span>
                <span class="text-xs font-bold text-slate-600 uppercase tracking-wide">Live in Orlando & Central FL</span>
            </div>
            <h1 class="text-5xl md:text-7xl font-bold text-slate-900 mb-8 leading-tight font-serif tracking-tight">
                Renovations, <span class="text-transparent bg-clip-text bg-gradient-to-r from-amber-500 to-orange-600 italic">Simplified.</span>
            </h1>
            <p class="text-xl md:text-2xl text-slate-600 mb-14 max-w-2xl mx-auto leading-relaxed">
                We turn your ideas into clear plans that contractors love. Get accurate, comparable bids without the technical headache.
            </p>
            <div class="grid md:grid-cols-2 gap-6 max-w-4xl mx-auto text-left">
                <div onclick="switchView('builder')" class="group bg-white border border-slate-200 rounded-3xl p-10 hover:shadow-2xl hover:border-amber-400 transition-all cursor-pointer relative overflow-hidden">
                    <div class="absolute top-0 right-0 bg-slate-100 rounded-bl-2xl px-4 py-2 text-xs font-bold text-slate-500">PROPERTY OWNERS</div>
                    <div class="h-14 w-14 bg-amber-50 rounded-2xl flex items-center justify-center mb-6"><i class="fa-solid fa-wand-magic-sparkles text-2xl text-amber-500"></i></div>
                    <h3 class="text-3xl font-bold text-slate-900 font-serif mb-3">I Need Work Done</h3>
                    <p class="text-slate-500 text-base mb-8">Describe your project or pick a template. Our AI builds the plan for you.</p>
                    <button class="text-slate-900 font-bold text-sm flex items-center bg-slate-50 px-5 py-3 rounded-xl group-hover:bg-slate-900 group-hover:text-white transition">Start Project <i class="fa-solid fa-arrow-right ml-2"></i></button>
                </div>
                <div onclick="switchView('bidboard')" class="group bg-slate-900 rounded-3xl p-10 hover:shadow-2xl transition-all cursor-pointer relative overflow-hidden">
                    <div class="absolute top-0 right-0 bg-slate-800 rounded-bl-2xl px-4 py-2 text-xs font-bold text-slate-300">PROS & SUBS</div>
                    <div class="h-14 w-14 bg-slate-800 rounded-2xl flex items-center justify-center mb-6"><i class="fa-solid fa-helmet-safety text-2xl text-white"></i></div>
                    <h3 class="text-3xl font-bold text-white font-serif mb-3">I Find Work</h3>
                    <p class="text-slate-400 text-base mb-8">Stop chasing vague leads. Access standardized scopes and claim jobs instantly.</p>
                    <button class="text-white font-bold text-sm flex items-center bg-slate-800 px-5 py-3 rounded-xl group-hover:bg-white group-hover:text-slate-900 transition">View Bid Board <i class="fa-solid fa-arrow-right ml-2"></i></button>
                </div>
            </div>
        </div>
    </section>

    <section id="view-builder" class="app-view bg-slate-50">
        <header class="bg-white border-b border-slate-200 h-16 flex items-center justify-between px-6 sticky top-0 z-30">
            <div class="flex items-center gap-3">
                <div onclick="switchView('landing')" class="cursor-pointer hover:bg-slate-100 p-2 rounded text-slate-500"><i class="fa-solid fa-arrow-left"></i></div>
                <span class="font-bold text-lg text-slate-900">New Project <span class="text-slate-300">|</span> <span class="text-slate-500 font-normal">Scope Builder</span></span>
            </div>
            <div class="flex items-center gap-4">
                <div class="text-xs font-bold text-slate-400 uppercase">Progress</div>
                <div class="w-32 h-2 bg-slate-100 rounded-full"><div id="progress-bar" class="h-full bg-amber-500 w-1/5 transition-all duration-500"></div></div>
            </div>
        </header>
        
        <div class="flex h-[calc(100vh-64px)] overflow-hidden">
            <div class="w-full lg:w-2/3 p-6 md:p-12 overflow-y-auto pb-32">
                <div class="max-w-3xl mx-auto">
                    
                    <div id="step-1" class="step-panel active">
                        <h2 class="text-3xl font-bold text-slate-900 mb-2 font-serif">Quick-Start Templates</h2>
                        <p class="text-slate-500 mb-6">Select a popular package to instantly pre-fill your technical scope of work, or start from scratch.</p>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-10">
                            <div onclick="applyTemplate('clubhouse', this)" class="template-card border-2 border-slate-200 rounded-xl p-5 cursor-pointer hover:border-amber-300 transition relative bg-white">
                                <div class="check-icon absolute top-3 right-3 text-amber-500 opacity-0 transform scale-50 transition"><i class="fa-solid fa-circle-check text-xl"></i></div>
                                <div class="h-10 w-10 bg-blue-50 text-blue-600 rounded-lg flex items-center justify-center mb-3"><i class="fa-solid fa-golf-ball-tee"></i></div>
                                <h3 class="font-bold text-slate-900 text-sm mb-1">The Clubhouse Suite</h3>
                                <p class="text-xs text-slate-500">Golf simulator enclosure, dedicated 20-amp circuits, lounge A/V, and wet bar setup.</p>
                            </div>
                            <div onclick="applyTemplate('forge', this)" class="template-card border-2 border-slate-200 rounded-xl p-5 cursor-pointer hover:border-amber-300 transition relative bg-white">
                                <div class="check-icon absolute top-3 right-3 text-amber-500 opacity-0 transform scale-50 transition"><i class="fa-solid fa-circle-check text-xl"></i></div>
                                <div class="h-10 w-10 bg-slate-900 text-white rounded-lg flex items-center justify-center mb-3"><i class="fa-solid fa-dumbbell"></i></div>
                                <h3 class="font-bold text-slate-900 text-sm mb-1">The Iron Forge</h3>
                                <p class="text-xs text-slate-500">Serious home gym. Commercial 3/4" rubber flooring, structural wall blocking, mini-split HVAC.</p>
                            </div>
                            <div onclick="applyTemplate('vault', this)" class="template-card border-2 border-slate-200 rounded-xl p-5 cursor-pointer hover:border-amber-300 transition relative bg-white">
                                <div class="check-icon absolute top-3 right-3 text-amber-500 opacity-0 transform scale-50 transition"><i class="fa-solid fa-circle-check text-xl"></i></div>
                                <div class="h-10 w-10 bg-cyan-50 text-cyan-600 rounded-lg flex items-center justify-center mb-3"><i class="fa-solid fa-droplet"></i></div>
                                <h3 class="font-bold text-slate-900 text-sm mb-1">The Recovery Vault</h3>
                                <p class="text-xs text-slate-500">Spa/Massage suite. Floor drains, 240v sauna power, moisture-resistant drywall, custom tile.</p>
                            </div>
                        </div>

                        <div class="border-t border-slate-200 pt-8">
                            <h3 class="font-bold text-slate-900 mb-4">Property Basics</h3>
                            <div class="grid grid-cols-2 gap-4 mb-6">
                                <div>
                                    <label class="block text-xs font-bold text-slate-500 uppercase mb-2">Space Size (Sq Ft)</label>
                                    <input type="number" id="input-sqft" oninput="updateSOW()" class="w-full p-3 border rounded-lg font-bold" placeholder="e.g. 400">
                                </div>
                                <div>
                                    <label class="block text-xs font-bold text-slate-500 uppercase mb-2">Ceiling Height</label>
                                    <select id="input-height" onchange="updateSOW()" class="w-full p-3 border rounded-lg font-bold bg-white">
                                        <option value="8">Standard 8'</option>
                                        <option value="10">Vaulted / 10'+</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="step-2" class="step-panel hidden">
                        <h2 class="text-3xl font-bold text-slate-900 mb-6 font-serif">Visuals & Inspiration</h2>
                        <div class="bg-indigo-50 p-6 rounded-2xl border border-indigo-100 mb-6">
                            <h3 class="font-bold text-indigo-900 mb-2"><i class="fa-solid fa-wand-magic-sparkles mr-2"></i>AI Concept Generator</h3>
                            <p class="text-sm text-indigo-700 mb-4">Describe the vibe. We'll generate a reference image for the contractor.</p>
                            <div class="flex gap-2">
                                <input type="text" id="ai-prompt" class="flex-1 p-3 border border-indigo-200 rounded-lg text-sm" placeholder="Moody lighting, wood slat walls, modern... ">
                                <button onclick="generateAIImage()" id="btn-generate" class="bg-indigo-600 text-white px-4 rounded-lg font-bold text-sm hover:bg-indigo-700">Generate</button>
                            </div>
                            <img id="ai-img" src="" class="w-full h-64 object-cover rounded-lg mt-4 hidden border border-indigo-200 shadow-sm">
                        </div>
                    </div>

                    <div id="step-3" class="step-panel hidden">
                        <h2 class="text-3xl font-bold text-slate-900 mb-6 font-serif">Budget & Rules</h2>
                        
                        <div class="bg-white p-6 rounded-xl border border-slate-200 mb-6">
                            <label class="block text-sm font-bold text-slate-900 mb-2">Maximum Budget ($)</label>
                            <div class="relative mb-4">
                                <span class="absolute left-4 top-3.5 text-slate-400 font-bold">$</span>
                                <input type="number" class="w-full pl-8 p-3 border border-slate-300 rounded-lg font-bold text-lg focus:ring-2 focus:ring-amber-500 outline-none" placeholder="25000">
                            </div>
                            <label class="flex items-center gap-3 cursor-pointer">
                                <input type="checkbox" checked class="w-4 h-4 text-amber-500 rounded"> 
                                <span class="text-sm text-slate-700 font-medium">Hide budget from bidders (Prevents price anchoring)</span>
                            </label>
                        </div>

                        <div class="bg-green-50 p-6 rounded-xl border border-green-200 mb-6">
                            <div class="flex justify-between items-center mb-2">
                                <label class="font-bold text-green-900"><i class="fa-solid fa-bolt text-green-600 mr-2"></i> Auto-Accept Bids?</label>
                                <input type="checkbox" class="w-5 h-5 text-green-600 rounded">
                            </div>
                            <p class="text-sm text-green-800">If a Verified Premier Pro bids under your hidden budget, instantly award them the job to speed up start times.</p>
                        </div>

                        <div class="bg-white p-6 rounded-xl border border-slate-200">
                            <h3 class="font-bold text-slate-900 mb-4">Q&A Strategy</h3>
                            <label class="flex items-start mb-4 cursor-pointer p-3 border rounded-lg hover:bg-slate-50">
                                <input type="radio" name="qa" value="std" checked class="mt-1 mr-3 text-amber-500">
                                <div><span class="font-bold text-sm text-slate-900">Standard Q&A</span><span class="block text-xs text-slate-500">Contractors ask public questions for 3 days before bidding.</span></div>
                            </label>
                            <label class="flex items-start cursor-pointer p-3 border rounded-lg hover:bg-slate-50">
                                <input type="radio" name="qa" value="exp" class="mt-1 mr-3 text-amber-500">
                                <div><span class="font-bold text-sm text-slate-900">"Leave it to Experts" (Fast Track)</span><span class="block text-xs text-slate-500">No Q&A. Contractors submit bids alongside a list of 'Key Assumptions'.</span></div>
                            </label>
                        </div>
                    </div>

                    <div class="flex justify-between mt-10 border-t pt-6 border-slate-200">
                        <button onclick="changeStep(-1)" id="btn-back" class="hidden text-slate-500 font-bold px-4 py-2 hover:bg-slate-100 rounded">Back</button>
                        <button onclick="changeStep(1)" id="btn-next" class="ml-auto bg-amber-500 text-white px-8 py-3 rounded-xl font-bold hover:bg-amber-600 shadow-lg transition">Next Step</button>
                    </div>
                </div>
            </div>

            <div class="hidden lg:block w-1/3 bg-slate-200 border-l border-slate-300 p-8 overflow-y-auto">
                <div class="sow-paper p-8 rounded shadow-lg min-h-[600px] font-mono text-sm relative">
                    <div class="border-b-2 border-slate-800 pb-4 mb-6">
                        <div class="text-xl font-bold uppercase">Scope of Work</div>
                        <div class="text-xs text-slate-500 mt-1" id="sow-title">Custom Project</div>
                    </div>
                    
                    <div class="mb-6">
                        <div class="font-bold text-slate-900 mb-1">1. SUMMARY</div>
                        <div id="sow-summary" class="text-slate-600 italic">Waiting for inputs...</div>
                    </div>

                    <div class="mb-6">
                        <div class="font-bold text-slate-900 mb-1 border-b border-slate-300">2. TECHNICAL REQUIREMENTS</div>
                        <ul class="list-disc pl-4 space-y-2 mt-2" id="sow-tech">
                            <li class="text-slate-500 italic">Select a template to auto-fill.</li>
                        </ul>
                    </div>

                    <div id="sow-visuals" class="hidden mb-6">
                        <div class="font-bold text-slate-900 mb-1 border-b border-slate-300">3. CONCEPT</div>
                        <img id="sow-concept-img" src="" class="w-full mt-2 rounded border border-slate-200 grayscale opacity-80">
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="view-bidboard" class="app-view bg-slate-100 flex flex-col h-screen overflow-hidden">
        
        <div class="bg-slate-900 text-slate-400 text-xs h-8 flex items-center overflow-hidden whitespace-nowrap border-b border-slate-800">
            <div class="flex animate-marquee gap-8 px-4">
                <span class="flex items-center"><span class="text-green-500 font-bold mr-2">NEW</span> The Iron Forge Gym (32801) - Open</span>
                <span class="flex items-center"><span class="text-amber-500 font-bold mr-2">CLOSING</span> Recovery Vault Build - Bids due in 2h</span>
                <span class="flex items-center"><span class="text-red-500 font-bold mr-2">URGENT</span> Emergency Demo (34787) - Instant Claim $2,500</span>
            </div>
        </div>

        <div class="flex flex-1 overflow-hidden">
            <aside class="w-64 bg-white border-r border-slate-200 flex flex-col z-20 shadow-xl">
                <div class="p-5 border-b border-slate-100"><h2 class="font-bold flex items-center gap-2"><i class="fa-solid fa-sliders text-amber-500"></i> Filters</h2></div>
                <div class="flex-1 overflow-y-auto p-5 space-y-6">
                    <div>
                        <h3 class="text-xs font-bold text-slate-400 uppercase mb-3">Divisions</h3>
                        <label class="flex items-center mb-2"><input type="checkbox" checked class="mr-2 text-amber-500"> 09 - Finishes</label>
                        <label class="flex items-center mb-2"><input type="checkbox" checked class="mr-2 text-amber-500"> 22 - Plumbing</label>
                        <label class="flex items-center"><input type="checkbox" checked class="mr-2 text-amber-500"> 26 - Electrical</label>
                    </div>
                    <div>
                        <h3 class="text-xs font-bold text-slate-400 uppercase mb-3">Project Class</h3>
                        <div class="flex gap-2"><button class="flex-1 py-1.5 bg-slate-900 text-white rounded text-xs font-bold">Resi</button><button class="flex-1 py-1.5 bg-slate-100 text-slate-600 rounded text-xs font-bold">Comm</button></div>
                    </div>
                </div>
                <div class="p-4 border-t bg-slate-50 flex items-center gap-3 cursor-pointer hover:bg-slate-100 transition" onclick="switchView('profile')">
                    <div class="h-10 w-10 bg-amber-500 rounded-full flex items-center justify-center font-bold text-slate-900">TC</div>
                    <div><div class="text-xs font-bold text-slate-900">Titan Const.</div><div class="text-[10px] text-green-600 font-bold">Pro Active</div></div>
                </div>
            </aside>

            <main class="flex-1 flex flex-col min-w-0">
                <header class="h-16 bg-white border-b flex items-center justify-between px-6">
                    <h1 class="font-bold text-lg">Live Opportunities</h1>
                    <select class="text-sm font-bold bg-transparent outline-none"><option>Closing Soonest</option><option>Highest Value</option></select>
                </header>
                <div class="flex-1 overflow-y-auto p-6 bg-slate-50">
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        
                        <div onclick="switchView('detail')" class="bg-white rounded-xl border border-slate-200 shadow-sm hover:shadow-lg transition-all cursor-pointer relative overflow-hidden group">
                            <div class="absolute left-0 top-0 w-1 h-full bg-blue-500"></div>
                            <div class="p-5">
                                <div class="flex justify-between items-start mb-3">
                                    <span class="font-mono text-[10px] font-bold bg-slate-100 px-2 py-1 rounded">DIV 26/09</span>
                                    <span class="text-[10px] font-bold text-red-500 bg-red-50 px-2 py-1 rounded">Due 4h</span>
                                </div>
                                <h3 class="font-bold text-lg group-hover:text-blue-600 transition">The Clubhouse Suite</h3>
                                <div class="text-xs text-slate-500 mb-4"><i class="fa-solid fa-location-dot"></i> Windermere (34786)</div>
                                <div class="pt-4 border-t flex justify-between items-center">
                                    <div><div class="text-[10px] font-bold text-slate-400 uppercase">Budget</div><div class="text-sm font-bold"><i class="fa-solid fa-eye-slash text-slate-400 mr-1"></i> Blind</div></div>
                                    <button class="bg-slate-900 text-white px-4 py-2 rounded-lg text-xs font-bold">View</button>
                                </div>
                            </div>
                        </div>

                        <div class="bg-slate-50 rounded-xl border border-slate-200 relative overflow-hidden">
                            <div class="absolute inset-0 backdrop-blur-[2px] bg-white/50 z-10 flex flex-col items-center justify-center text-center p-6">
                                <i class="fa-solid fa-lock text-2xl text-amber-500 mb-2"></i>
                                <h3 class="font-bold text-slate-900">Commercial Pro Only</h3>
                                <button class="mt-3 bg-amber-500 text-white px-4 py-2 rounded-full text-xs font-bold shadow hover:bg-amber-600 hover:scale-105 transition">Upgrade to Unlock</button>
                            </div>
                            <div class="p-5 opacity-40 filter blur-[2px]">
                                <h3 class="font-bold text-lg">Medical Office Build-out</h3>
                                <div class="pt-4 border-t mt-4"><div class="text-lg font-bold">$150,000+</div></div>
                            </div>
                        </div>

                    </div>
                </div>
            </main>
        </div>
    </section>

    <section id="view-detail" class="app-view bg-slate-100">
        <nav class="bg-slate-900 text-white h-16 flex items-center px-6 sticky top-0 z-30">
            <a onclick="switchView('bidboard')" class="text-slate-400 hover:text-white cursor-pointer"><i class="fa-solid fa-arrow-left mr-2"></i> Back to Board</a>
        </nav>
        <div class="max-w-6xl mx-auto p-6 grid grid-cols-1 md:grid-cols-3 gap-8">
            
            <div class="md:col-span-2 space-y-6">
                <div class="sow-paper p-8 rounded font-mono text-sm">
                    <h2 class="font-bold border-b-2 border-slate-800 pb-2 mb-4 text-lg">Exhibit A: Scope of Work</h2>
                    <h3 class="font-bold mt-4">1. SUMMARY</h3>
                    <p class="mb-4">"The Clubhouse Suite" installation in existing 400sqft vacant garage.</p>
                    <h3 class="font-bold">2. TECHNICAL REQUIREMENTS</h3>
                    <ul class="list-disc pl-5 space-y-2 mt-2">
                        <li>Modify ceiling joists to ensure 10' clearance for golf simulator.</li>
                        <li>Run dedicated 20-amp circuits for A/V projector.</li>
                        <li>Install owner-supplied wet bar cabinetry.</li>
                        <li>Epoxy flake flooring application.</li>
                    </ul>
                </div>

                <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="font-bold text-slate-900">Clarification Board (RFI)</h3>
                    </div>
                    <div class="bg-slate-50 p-4 rounded-lg border border-slate-100 mb-4">
                        <p class="text-sm font-medium">Q: Does the electrical panel have room for the new 20-amp circuits?</p>
                        <p class="text-sm text-slate-600 mt-2 pl-4 border-l-2 border-amber-500">A: Yes, panel was upgraded to 200A last year and has empty slots. - Owner</p>
                    </div>
                </div>
            </div>

            <div class="md:col-span-1 space-y-4">
                <div class="bg-white p-6 rounded-xl shadow-lg border border-slate-200">
                    <div class="text-xs font-bold text-slate-500 uppercase mb-4">Submit Proposal</div>
                    
                    <div class="mb-4">
                        <label class="block text-xs font-bold text-slate-700 mb-1">Total Fixed Price ($)</label>
                        <input type="number" class="w-full border p-3 rounded-lg font-mono font-bold text-lg focus:ring-2 focus:ring-slate-900 outline-none" placeholder="0.00">
                    </div>
                    
                    <div class="mb-6 bg-yellow-50 p-4 rounded-lg border border-yellow-200">
                        <label class="block text-xs font-bold text-yellow-800 mb-2"><i class="fa-solid fa-triangle-exclamation mr-1"></i> Key Assumptions</label>
                        <p class="text-[10px] text-yellow-700 mb-2 leading-relaxed">Client opted for "Expert Mode" to skip Q&A. List conditions your price relies on.</p>
                        <textarea class="w-full border border-yellow-300 p-2 rounded text-sm h-24 focus:outline-none focus:border-yellow-500" placeholder="- Assumes no structural rot in ceiling joists..."></textarea>
                    </div>

                    <button class="w-full bg-slate-900 text-white font-bold py-4 rounded-xl shadow-lg hover:bg-slate-800 transition transform hover:-translate-y-1">Submit Official Bid</button>
                    <div class="text-center mt-3 text-xs text-green-600 font-bold"><i class="fa-solid fa-bolt"></i> Auto-Accept is enabled for this job.</div>
                </div>
            </div>
        </div>
    </section>

    <section id="view-profile" class="app-view bg-slate-50">
        <nav class="bg-slate-900 text-white h-16 flex items-center px-6"><a onclick="switchView('bidboard')" class="cursor-pointer hover:text-slate-300 transition"><i class="fa-solid fa-arrow-left mr-2"></i> Back to Board</a></nav>
        <div class="max-w-4xl mx-auto p-6">
            
            <div class="bg-white p-8 rounded-2xl border border-slate-200 shadow-sm flex flex-col md:flex-row gap-6 items-start mb-8 relative">
                <button onclick="document.getElementById('edit-modal').classList.remove('hidden')" class="absolute top-6 right-6 text-slate-400 hover:text-slate-900"><i class="fa-solid fa-pen"></i> Edit</button>
                <div class="h-24 w-24 bg-amber-500 rounded-2xl flex items-center justify-center text-3xl font-bold text-slate-900 shadow-inner">TC</div>
                <div class="flex-1">
                    <h1 class="text-3xl font-bold text-slate-900 mb-2">Titan Construction</h1>
                    <p class="text-slate-500 text-sm mb-4">Orlando, FL â€¢ Commercial & Residential Build-outs</p>
                    <div class="flex flex-wrap gap-2">
                        <span class="verified-badge px-3 py-1 rounded-full text-xs font-bold"><i class="fa-solid fa-shield-check mr-1"></i> CGC License Active</span>
                        <span class="verified-badge px-3 py-1 rounded-full text-xs font-bold"><i class="fa-solid fa-file-contract mr-1"></i> Insured ($2M)</span>
                    </div>
                </div>
            </div>

            <div class="bg-gradient-to-r from-indigo-600 to-purple-700 rounded-2xl p-8 text-white shadow-xl relative overflow-hidden">
                <i class="fa-brands fa-stripe absolute -right-4 -bottom-10 text-9xl opacity-20"></i>
                <div class="relative z-10 max-w-xl">
                    <h2 class="text-2xl font-bold mb-2">Get ready to get paid.</h2>
                    <p class="text-indigo-100 mb-6 text-sm">BidBridge uses Stripe to securely route escrow funds directly to your bank account. Connect your account to unlock bidding.</p>
                    <button id="btn-stripe" onclick="connectStripe()" class="bg-white text-indigo-700 font-bold px-6 py-3 rounded-lg shadow hover:bg-indigo-50 transition">
                        <i class="fa-solid fa-building-columns mr-2"></i> Set Up Direct Deposit
                    </button>
                </div>
            </div>
        </div>

        <div id="edit-modal" class="fixed inset-0 bg-slate-900/80 hidden z-50 flex items-center justify-center">
            <div class="bg-white rounded-2xl shadow-2xl w-full max-w-lg p-6">
                <h2 class="text-xl font-bold mb-4">Update Documents</h2>
                <div class="border-2 border-dashed border-slate-300 p-6 text-center rounded-xl cursor-pointer hover:bg-slate-50 mb-4">
                    <i class="fa-solid fa-cloud-arrow-up text-3xl text-slate-400 mb-2"></i>
                    <p class="text-sm font-bold">Upload new Insurance Certificate</p>
                </div>
                <div class="flex justify-end gap-2">
                    <button onclick="document.getElementById('edit-modal').classList.add('hidden')" class="px-4 py-2 font-bold text-slate-500 hover:text-slate-800">Cancel</button>
                    <button class="px-4 py-2 bg-slate-900 text-white font-bold rounded-lg">Save</button>
                </div>
            </div>
        </div>
    </section>

    <section id="view-admin" class="app-view bg-slate-100 flex h-screen overflow-hidden">
        <aside class="w-64 bg-slate-900 text-slate-400 flex flex-col h-full">
            <div class="h-16 flex items-center px-6 bg-slate-950 font-bold text-white"><i class="fa-solid fa-shield-cat text-red-500 mr-2"></i> Admin Panel</div>
            <nav class="p-4 space-y-2">
                <a class="block py-2 text-white border-l-2 border-red-500 pl-3">Support & Overrides</a>
            </nav>
        </aside>
        <main class="flex-1 p-8 overflow-y-auto">
            <div class="flex justify-between items-center mb-8">
                <h1 class="text-2xl font-bold text-slate-900">Project Support</h1>
                <span class="bg-red-100 text-red-700 text-xs font-bold px-3 py-1 rounded border border-red-200"><i class="fa-solid fa-triangle-exclamation mr-1"></i> God Mode Active</span>
            </div>
            
            <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden max-w-3xl">
                <div class="p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50">
                    <div>
                        <h3 class="font-bold text-lg">Project PRJ-992 (The Clubhouse Suite)</h3>
                        <p class="text-sm text-slate-500">Client: John Doe</p>
                    </div>
                    <button onclick="document.getElementById('admin-modal').classList.remove('hidden')" class="bg-red-600 text-white px-4 py-2 rounded text-xs font-bold shadow hover:bg-red-700"><i class="fa-solid fa-pen-to-square mr-1"></i> Override Scope</button>
                </div>
                <div class="p-6">
                    <h4 class="font-bold mb-3 text-sm uppercase text-slate-500">Active Bids</h4>
                    <div class="flex justify-between items-center p-4 border rounded-lg bg-slate-50">
                        <div><div class="font-bold">Titan Const.</div><div class="text-xs text-slate-500">Submitted 2h ago</div></div>
                        <div class="text-right">
                            <div class="font-bold text-lg mb-1">$14,500</div>
                            <button onclick="document.getElementById('admin-modal').classList.remove('hidden')" class="text-xs text-red-600 font-bold hover:underline">Force Edit Bid</button>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <div id="admin-modal" class="fixed inset-0 bg-slate-900/80 hidden z-50 flex items-center justify-center">
            <div class="bg-white rounded-xl w-full max-w-md overflow-hidden border-t-4 border-red-600 shadow-2xl">
                <div class="p-4 bg-red-50 font-bold text-red-800">Admin Override</div>
                <div class="p-6 space-y-4">
                    <p class="text-xs text-slate-500">This action requires user consent and will be permanently logged in the audit trail.</p>
                    <input type="number" placeholder="New Value ($)" class="w-full border p-2 rounded text-sm font-mono">
                    <input type="text" placeholder="Reason for change (Required)" class="w-full border p-2 rounded text-sm">
                </div>
                <div class="p-4 border-t bg-slate-50 flex justify-end gap-2">
                    <button onclick="document.getElementById('admin-modal').classList.add('hidden')" class="px-4 py-2 text-sm font-bold text-slate-500">Cancel</button>
                    <button onclick="executeOverride()" class="px-4 py-2 text-sm font-bold bg-red-600 text-white rounded">Execute & Notify User</button>
                </div>
            </div>
        </div>
    </section>

    <button class="fixed bottom-20 right-8 h-14 w-14 bg-slate-900 text-white rounded-full shadow-2xl flex items-center justify-center text-2xl z-40 hover:scale-110 transition"><i class="fa-regular fa-comment-dots"></i></button>

    <div id="demo-nav">
        <div onclick="switchView('landing')" class="demo-btn active">Home</div>
        <div onclick="switchView('builder')" class="demo-btn">Builder</div>
        <div onclick="switchView('bidboard')" class="demo-btn">Board</div>
        <div onclick="switchView('detail')" class="demo-btn">Detail</div>
        <div onclick="switchView('profile')" class="demo-btn">Profile</div>
        <div onclick="switchView('admin')" class="demo-btn">Admin</div>
    </div>

    <script>
        // --- View Controller ---
        function switchView(id) {
            document.querySelectorAll('.app-view').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.demo-btn').forEach(el => el.classList.remove('active'));
            document.getElementById('view-'+id).classList.add('active');
            event.target.classList.add('active');
            window.scrollTo(0,0);
        }

        // --- Builder Logic & Templates ---
        let bStep = 1;
        const totalSteps = 3;

        function applyTemplate(type, element) {
            // Visual Selection
            document.querySelectorAll('.template-card').forEach(c => c.classList.remove('active'));
            element.classList.add('active');
            
            // Build the specific technical requirements list based on selection
            let reqs = '';
            let title = '';
            if(type === 'clubhouse') {
                title = "The Clubhouse Suite";
                reqs = `<li>10ft ceiling clearance modification for swing arc.</li><li>Dedicated 20-amp circuits for A/V.</li><li>Epoxy flake flooring.</li>`;
            } else if (type === 'forge') {
                title = "The Iron Forge";
                reqs = `<li>Commercial 3/4" rubber flooring installation.</li><li>In-wall structural blocking for squat rack anchors.</li><li>Ductless mini-split HVAC installation.</li>`;
            } else if (type === 'vault') {
                title = "The Recovery Vault";
                reqs = `<li>Floor drain & water supply installation for plunge.</li><li>240v 50-amp circuit for traditional sauna heater.</li><li>Mold-resistant drywall (green board) throughout.</li>`;
            }
            
            document.getElementById('sow-title').innerText = title;
            document.getElementById('sow-tech').innerHTML = reqs;
            document.getElementById('input-sqft').value = "400"; // Default pre-fill
            updateSOW();
        }

        function changeStep(d) {
            document.getElementById(`step-${bStep}`).classList.add('hidden');
            bStep += d;
            if(bStep > totalSteps) { switchView('bidboard'); return; } // Demo end state
            document.getElementById(`step-${bStep}`).classList.remove('hidden');
            document.getElementById(`step-${bStep}`).classList.add('active');
            document.getElementById('progress-bar').style.width = `${(bStep/totalSteps)*100}%`;
            document.getElementById('btn-back').classList.toggle('hidden', bStep === 1);
            if(bStep === totalSteps) document.getElementById('btn-next').innerText = "Post Project";
        }

        function updateSOW() {
            const sqft = document.getElementById('input-sqft').value;
            const height = document.getElementById('input-height').value;
            document.getElementById('sow-summary').innerText = `Appx ${sqft || 0} sq ft space. ${height}ft ceilings.`;
        }

        function generateAIImage() {
            document.getElementById('btn-generate').innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i>';
            setTimeout(() => {
                document.getElementById('btn-generate').innerHTML = 'Generated';
                document.getElementById('ai-img').src = "https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?auto=format&fit=crop&w=800&q=80";
                document.getElementById('sow-concept-img').src = document.getElementById('ai-img').src;
                document.getElementById('ai-img').classList.remove('hidden');
                document.getElementById('sow-visuals').classList.remove('hidden');
            }, 1500);
        }

        // --- Stripe / Admin Stubs ---
        function connectStripe() {
            document.getElementById('btn-stripe').innerHTML = '<i class="fa-solid fa-spinner fa-spin mr-2"></i> Connecting...';
            setTimeout(() => alert("Redirecting to Stripe Onboarding (Test Mode)"), 800);
        }

        function executeOverride() {
            document.getElementById('admin-modal').classList.add('hidden');
            alert("Database updated. Email receipt sent to user via NodeMailer.");
        }
    </script>
</body>
</html>
